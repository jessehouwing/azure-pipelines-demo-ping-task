# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
  - task: UseNode@1
    inputs:
      version: 10.*
      checkLatest: true
    
- task: Snyk@2
  inputs:
    multiFile: true
    files: '#yarn.lock
      **/package.json
      #package-lock.json
      #Gemfile
      #Gemfile.lock
      #pom.xml
      #Pipfile
      #requirements.txt
      #build.gradle
      #build.gradle.kts
      #build.sbt
      #Gopkg.lock
      #**/vendor/vendor.json
      #**/obj/project.assets.json
      #packages.config
      #composer.lock
      
      !**/node_modules/**/*'
    protect: false
    test: true
    monitor: false
    authType: 'endpoint'
    endpoint: 'Snyk.io'
    failBuild: true
    dev: false
    trustPolicies: false